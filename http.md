#### 格式

* 请求行/响应行
* header
* body（请求/响应）

#### headers

* Accept-Encoding:gzip
* Content-Encoding:gzip
* Host:www.baidu.com

#### 特点

* 客户端服务器模型：C/S
* 早期无状态，cookie/session
* 纯文本协议，跨平台
* 不安全
* 明文传输
* 无法验证身份
* 中间人攻击：篡改数据

#### HTTP幂等性

* 一次和多次请求某一个资源具有同样的副作用，结果一致
* get：获取资源，幂等
* delete：删除资源，幂等
* post：创建资源（uri为资源接收者），没有幂等
* put：创建或更新资源（uri为资源本身），幂等

#### 应用层协议：Restful Api

#### 传输层协议：SOA

#### 短连接

#### 长连接

* 1.1默认开启
* Connection: keep-alive

#### 非管道化

* 完全串行执行，请求->响应->请求->响应

1. 队头阻塞
2. 请求必须是幂等的

#### 管道化

* 在“长连接”基础上实现
* 在响应到达之前，可以将多条请求放入队列

#### TCP队头阻塞

* TCP数据包是有序传输，中间一个数据包丢失，会等待该数据包重传，造成后面的数据包的阻塞。

#### HTTP队头阻塞

* 非管道化：客户端
* 管道化：服务端
解决方法：
  * 并发TCP连接
  * 域名分片：多个二级域名
  * HTTP2多路复用：
    * 将多个请求复用同一个tcp通道中，通过二进制分帧并且给每个帧打上流的 ID 去避免依次响应的问题，对方接收到帧之后根据 ID 拼接出流，这样就可以做到乱序响应从而避免请求时的队首阻塞问题
    * 帧：HTTP/2 数据通信的最小单位：请求和响应等消息由一个或多个帧组成。
    * 流：存在于连接中的一个虚拟通道。流可以承载双向消息，每个流都有一个唯一的整数ID。
    * HTTP/2 采用二进制格式传输数据，而非 HTTP 1.x 的文本格式

#### 现有TCP网络协议存在的问题

1. TCP队头阻塞，无解
2. 握手延迟无法避免
    * 三次握手四次挥手
    * ssl握手
3. 中间网络设备限制
    * 限制tcp端口
    * nat修改tcp头部
    * 中间设备可能删除不识别的tcp选项
4. 协议难以修改，需要升级通信双方系统

#### QUIC

* QUIC = UDP + TLS + HTTP2
